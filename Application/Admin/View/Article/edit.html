<include file="Public/header" />
<script type="text/javascript" src="__PUBLIC__/colorpicker/colorpicker.js"></script>
<script type="text/javascript" src="__PUBLIC__/Home/js/jquery-1.8.3.min.js"></script>
<script type="text/javascript" src="__PUBLIC__/Home/js/Validform.js"></script>
<script src="__PUBLIC__/laydate/laydate.js"></script>
<div class="row wrapper border-bottom white-bg page-heading">
    <div class="col-lg-10">
        <h2>表单验证</h2>
        <ol class="breadcrumb">
            <li>
                <a href="index.html">栏目列表</a>
            </li>
            <li>
                <strong>添加栏目</strong>
            </li>
        </ol>
    </div>
</div>
<div class="wrapper wrapper-content  animated fadeInRight">
    <div class="row">
        <div class="col-lg-6">
            <div class="ibox ">
                <div class="ibox-content">
                    <script>
                        function fnClickAddRow() {
                            var url="{:U('Article/lis',array('cid'=>I('get.cid')))}";
                            location.reload();
                            location.href=url;
                        }
                        $(function(){
                        })
                    </script>
                    <div class="">
                        <a onclick="fnClickAddRow();" href="javascript:void(0)" class="btn btn-primary ">内容列表</a>
                    </div>
                    <form role="form" id="form" action="{:U('Article/edit',array('cid'=>I('get.cid'),'id'=>I('get.id')))}" method="post" enctype="multipart/form-data">
                        <input type="hidden" name="model_name" value="Article"/>
                        <input type="hidden" name="cate_id" value="{:I('get.cid')}"/>
                        <input type="hidden" name="id" value="{:I('get.id')}"/>
                        <div class="form-group">
                            <label>产品类型</label>
                            <select name="type_id" datatype="*" nullmsg="请选择商品类型" class="form-control" >
                                <option value="">请选择文章分类</option>
                                <option value="1">新闻中心</option>
                                <option value="2">最新活动</option>
                            </select>
                            <div class="error" style="position:relative;left:485px;top:-25px"></div>
                        </div>
                        <div class="form-group">
                            <label>标题</label>
                            <input type="text" name="title" id="title" datatype="*1-50" class="form-control"
                                   value="{$vo.title}" style="color:{$vo['colorval']};font-weight:{$vo['boldval']}"
                                   nullmsg="请输入标题" errormsg="长度不能超过50"
                                   placeholder="请输入标题名称"/>
                            <span onclick="colorpicker('colorpanel','colorval','title');" class="color" title="标题颜色"style="position:relative;left:490px;top:-25px"><img src="__PUBLIC__/colorpicker/colorBg.png" /></span>
                            <span id="colorpanel"style="position:relative;left:560px;top:-25px"></span>
                            <span onclick="blodpicker('boldval','title');" class="blod" title="标题加粗" style="position:relative;left:500px;top:-25px"><img src="__PUBLIC__/colorpicker/boldBg.png" /></span>
                            <span onclick="clearpicker()" class="clear" title="清除属性" style="position:relative;left:540px;top:-43px;color:green">[#]</span>
                            <div class="error" style="position:relative;left:485px;top:-25px"></div>
                        </div>
                        <input type="hidden" name="colorval" id="colorval" value="{$vo['colorval']}" />
                        <input type="hidden" name="boldval" id="boldval" value="{$vo['boldval']}" />
                        <div class="form-group">
                            <label>标题别名</label>
                            <input type="text" name="alias" value="{$vo.alias}"
                                   nullmsg="请输入标题别名" errormsg="长度不能超过30"
                                   placeholder="请输入标题别名" class="form-control">
                            <div class="error" style="position:relative;left:485px;top:-25px"></div>
                        </div>
                        <div class="form-group">
                            <label>logo图标</label>
                            <input type="text" name="logo"  class="form-control" id="logo" value="{$vo.logo}"/>
                            <input type="button" id="filemanager" value="选择文件" />
                            <div <if condition="$vo.logo neq ''">style="display:block"<else/>style="display:none"</if> id="cj">
                            <img src="{$vo.logo}" id="cjsc" width="200px" height="80px"/>
                            <input type="button"  value="删除" onclick="removesrc(this,{$vo.id})"/>
                        </div>
                        <link rel="stylesheet" href="__PUBLIC__/kindeditor/themes/default/default.css" />
                        <script charset="utf-8" src="__PUBLIC__/kindeditor/kindeditor.js"></script>
                        <script charset="utf-8" src="__PUBLIC__/kindeditor/lang/zh_CN.js"></script>
                        <script>
                            KindEditor.ready(function(K) {
                                var editor = K.editor({
                                    allowFileManager : true,
                                    uploadJson:"{:U('Member/uploadfile')}",
                                    fileManagerJson :"__PUBLIC__/kindeditor/php/file_manager_json1.php"
                                });
                                K('#filemanager').click(function() {
                                    editor.loadPlugin('image', function() {
                                        editor.plugin.imageDialog({
                                            //showLocal : false,
                                            //showRemote:false,
                                            //imageUrl : K('#url2').val(),
                                            clickFn : function(url, title, width, height, border, align) {
                                                K('#logo').val(url);
                                                K('#cj').show();
                                                K('#cjsc').attr('src',url);
                                                editor.hideDialog();
                                            }
                                        });
                                    });
                                });
                            });
                            //websocket聊天室
                        </script>
                        <script>
                            function removesrc(obj,id){
                                var url="{:U('Member/ajax_remove')}";
                                var lj=$(obj).prev().attr('src');
                                $.post(url,{lj:lj,id:id},function(e){
                                    $(obj).parent().hide();
                                    $('#logo').val('');
                                })
                            }
                        </script>
                        </div>
                        <div class="form-group">
                            <label>图片宽度(表示生成缩略图的宽度和高度，一般不用填)</label>
                            <input type="text" name="width" <if condition="$vo.width ">value={$vo.width}</if>
                                   placeholder="请输入图片宽度" class="form-control">
                            <label>图片高度(表示生成缩略图的宽度和高度，一般不用填)</label>
                            <input type="text" name="height" <if condition="$vo.width ">value={$vo.height}</if>
                                   placeholder="请输入图片高度" class="form-control">
                        </div>
                        <div class="form-group">
                            <label>关键字</label>
                            <input type="text" name="keywords"
                                   nullmsg="请输入关键字" errormsg="长度不能超过30"
                                   placeholder="请输入关键字" class="form-control">
                            <div class="error" style="position:relative;left:485px;top:-25px"></div>
                        </div>
                        <div class="form-group">
                            <label>作者</label>
                            <input type="text" name="author"  value="{$vo.author}"
                                   nullmsg="请输入作者" errormsg="长度不能超过20"
                                   placeholder="请输入作者" class="form-control" value="author">
                            <div class="error" style="position:relative;left:485px;top:-25px"></div>
                        </div>
                        <div class="form-group">
                            <label>点击量</label>
                            <input type="text" name="author"  value="{$vo.hits}"
                                   nullmsg="请输入点击量" errormsg="长度不能超过20"
                                   placeholder="请输入点击量" class="form-control" value="hits">
                            <div class="error" style="position:relative;left:485px;top:-25px"></div>
                        </div>
                        <div class="form-group">
                            <label>描述</label>
                            <textarea name="des" name="des" id="des"
                                   nullmsg="请输入描述" errormsg="长度不能超过30"
                                   placeholder="请输入描述" class="form-control">{$vo.des}</textarea>
                            <div class="error" style="position:relative;left:485px;top:-25px"></div>
                        </div>
                        <div class="form-group">
                            <label>发布时间</label>
                            <input type="text" name="uptime" id="demo"  value="{$vo.uptime|date='Y-m-d h:i:s',###}"
                                   placeholder="请输入发布时间"  class="laydate-icon">
                            <div class="error" style="position:relative;left:485px;top:-25px"></div>
                        </div>
                        <script>
                            ;!function(){
                                laydate.skin('molv');
                                laydate({
                                    elem: '#demo',
                                    istime:true,
                                    format: 'YYYY-MM-DD hh:mm:ss', // 分隔符可以任意定义，该例子表示只显示年月
                                    /*festival: true, //显示节日
                                     choose: function(datas){ //选择日期完毕的回调
                                     alert('得到：'+datas);
                                     }*/
                                });
                            }();
                        </script>
                        <div class="form-group">
                            <label>是否推荐</label><br>
                            <input type="radio" name="is_rec" value="1" datatype="*" nullmsg="请选择" <if condition='$vo.is_rec eq 1'>checked</if>>是
                            <input type="radio" name="is_rec"   value="0" <if condition='$vo.is_rec eq 0'>checked</if>>否
                            <div class="error" style="position:relative;left:485px;top:-25px"></div>
                        </div>
                        <div class="form-group">
                            <label>是否显示</label><br>
                            <input type="radio" name="is_show" value="1" datatype="*" nullmsg="请选择" <if condition='$vo.is_show eq 1'>checked</if>>是
                            <input type="radio" name="is_show"   value="0" <if condition='$vo.is_show eq 0'>checked</if>>否
                            <div class="error" style="position:relative;left:485px;top:-25px"></div>
                        </div>
                        <div class="form-group">
                            <label>文章排序</label>
                            <input type="text" name="sort_num"
                                   datatype="n"
                                   nullmsg="请输入排序数字" value="{$vo.id}"
                                   placeholder="请输入排序数字" class="form-control">
                            <div class="error" style="position:relative;left:365px;top:-25px"></div>
                        </div>

                        <!--<div class="form-group">
                            <label>文章内容</label><br>
                            <textarea name="content" style="width:1000px;height:500px">{:html_entity_decode($vo['content'])}</textarea>
                            &lt;!&ndash;引入kindeditor编辑器&ndash;&gt;
                            <script charset="utf-8" src="__PUBLIC__/kindeditor/kindeditor.js"></script>
                            <script charset="utf-8" src="__PUBLIC__/kindeditor/lang/zh_CN.js"></script>
                            <script type="text/javascript">
                                var editor;
                                KindEditor.ready(function(K) {
                                    editor = K.create('textarea[name="content"]', {
                                        allowFileManager : true,
                                        afterBlur : function(){
                                            //编辑器失去焦点时直接同步，可以取到值
                                            this.sync();
                                        }
                                    });
                                });
                            </script>
                            &lt;!&ndash;引入kindeditor编辑器&ndash;&gt;
                            <div class="error" style="position:relative;left:485px;top:-25px"></div>
                        </div>-->
                        <div class="form-group">
                            <label>会员描述</label><br>
                            <textarea name="content"  id="content"></textarea>

                            <div class="error" style="position:relative;left:365px;top:-25px"></div>
                        </div>
                        <div>
                            <button class="btn btn-sm btn-primary m-t-n-xs" type="submit"><strong>提交</strong>
                            </button>
                        </div>
                    </form>
                </div>
            </div>
            <script>
                $("#form").Validform({
                    tiptype:function(msg,o,cssctl) {
                        if (!o.obj.is("form")) {
                            var objtip = o.obj.siblings('div.error');
                            cssctl(objtip, o.type);
                            objtip.text(msg);
                        }
                    }
                })
            </script>


        </div>
    </div>

</div>
<include file="Public/footer"/>
<!--引入UMeditor编辑器-->
<link href="__PUBLIC__/umeditor1_2_2-utf8-php/themes/default/css/umeditor.css" type="text/css" rel="stylesheet">
<script type="text/javascript" src="__PUBLIC__/umeditor1_2_2-utf8-php/third-party/jquery.min.js"></script>
<script type="text/javascript" charset="utf-8" src="__PUBLIC__/umeditor1_2_2-utf8-php/umeditor.config.js"></script>
<script type="text/javascript" charset="utf-8" src="__PUBLIC__/umeditor1_2_2-utf8-php/umeditor.min.js"></script>
<script type="text/javascript" src="__PUBLIC__/umeditor1_2_2-utf8-php/lang/zh-cn/zh-cn.js"></script>
<script type="text/javascript">
    UM.getEditor("content", {
        initialFrameWidth : "150%",
        initialFrameHeight : "500",
    });
    UM.getEditor("des", {
        initialFrameWidth : "150%",
        initialFrameHeight : "200",
        toolbar:[
            'source | undo redo | bold italic underline strikethrough | superscript subscript | forecolor backcolor | removeformat | emotion'
        ]
    });
</script>